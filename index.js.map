{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseUrl = \"https://pixabay.com/api\";\nconst apiKey = '49031681-364093aaa4634c3b7924c5e31'; \n\nexport async function getImg(searchName, page = 1) {\n  const params = new URLSearchParams({\n    key: apiKey,\n    q: searchName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: 40, \n  });\n\n  try {\n    const response = await axios.get(`${baseUrl}?${params}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error('Failed to fetch images');\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: 'true',\n});\n\nexport function ShowGLR(arrPict) {\n  const gallery = document.querySelector(\".gallery\");\n\n  const markup = arrPict.map(image => `\n    <li class=\"gallery-item\">\n      <a class='gallery-link' href=\"${image.largeImageURL}\">\n        <img class=\"li-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"li-text\">\n          <table class=\"table\">\n            <tr><td>Likes</td><td>Views</td><td>Comments</td><td>Downloads</td></tr>\n            <tr><td>${image.likes}</td><td>${image.views}</td><td>${image.comments}</td><td>${image.downloads}</td></tr>\n          </table>\n        </div>\n      </a>\n    </li>\n  `).join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);  \n  lightbox.refresh();  \n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImg } from \"./js/pixabay-api\";\nimport { ShowGLR } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input-search\");\nconst waitMsg = document.querySelector(\".wait-msg\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nlet currentPage = 1; \nlet searchQuery = ''; \n\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n\n  searchQuery = input.value.trim();  \n\n  if (!searchQuery) {\n    iziToast.show({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: 'rgba(255, 255, 255, 1)',\n      position: \"topRight\",\n      title: 'Error',\n      titleColor: '#fff',\n      message: 'Please enter a search query'\n    });\n    return;\n  }\n\n  waitMsg.innerHTML = 'Loading images... <span class=\"loader\"></span>';\n\n\n  document.querySelector(\".gallery\").innerHTML = '';\n\n  currentPage = 1;\n  \n  try {\n    const data = await getImg(searchQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        backgroundColor: 'rgba(239, 64, 64, 1)',\n        messageColor: 'rgba(255, 255, 255, 1)',\n        position: \"topRight\",\n        title: 'Error',\n        titleColor: '#fff',\n        message: 'No images found, please try another search!'\n      });\n      return;\n    }\n\n    ShowGLR(data.hits);  \n    waitMsg.textContent = '';  \n\n    if (data.totalHits > currentPage * 40) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'none';  \n    }\n\n  } catch (error) {\n    waitMsg.textContent = 'Oops... something went wrong.';\n    console.error(error);\n  }\n  form.reset();  \n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n \n  waitMsg.innerHTML = 'Loading more images... <span class=\"loader\"></span>';\n  \n  currentPage += 1; \n\n  try {\n    const data = await getImg(searchQuery, currentPage);\n    ShowGLR(data.hits);  \n    waitMsg.textContent = ''; \n\n    if (data.totalHits <= currentPage * 40) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        backgroundColor: 'rgba(239, 64, 64, 1)',\n        messageColor: 'rgba(255, 255, 255, 1)',\n        position: \"topRight\",\n        title: 'End of results',\n        titleColor: '#fff',\n        message: \"We're sorry, but you've reached the end of search results\"\n      });\n    }\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n\n  } catch (error) {\n    waitMsg.textContent = 'Oops... something went wrong.';\n    console.error(error);\n  }\n});\n\n"],"names":["baseUrl","apiKey","getImg","searchName","page","params","axios","error","lightbox","SimpleLightbox","ShowGLR","arrPict","gallery","markup","image","form","input","waitMsg","loadMoreBtn","currentPage","searchQuery","e","iziToast","data","cardHeight"],"mappings":"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"}